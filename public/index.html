<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaskFlow</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <div id="login-overlay">
        <div class="login-box">
            <h2>🔐 כניסה למערכת</h2>
            <div class="password-wrapper">
                <input type="password" id="passwordInput" placeholder="הזן סיסמה..." autofocus>
                <button type="button" id="togglePasswordBtn" onclick="togglePasswordVisibility()">👁️</button>
            </div>
            <button onclick="checkLogin()" class="btn-primary" style="margin-top:15px;">כניסה</button>
            <p id="loginError" style="color:red; display:none; margin-top:10px;">סיסמה שגויה!</p>
        </div>
    </div>

    <button id="scrollTopBtn" onclick="scrollToTop()">⬆</button>

    <header class="main-header">
        <div class="header-content">
            <div class="logo">🏗️</div>
            <div>
                <h1>TaskFlow Pro</h1>
                <p>מערכת לניהול פרויקטים ומשימות</p>
            </div>
        </div>
    </header>

    <div class="container hidden" id="main-view">
        <div class="card form-card">
            <h2>➕ הוספת משימה חדשה</h2>
            <form id="addTaskForm">
                <div class="form-group">
                    <label>תיאור משימה:</label>
                    <input type="text" id="desc" required>
                </div>
                
                <div class="form-group checkbox-group">
                    <input type="checkbox" id="isImportant">
                    <label for="isImportant" style="color:red; font-weight:bold;">🔥 משימה חשובה / דחופה</label>
                </div>

                <div class="section-title">👥 אחראים ומבצעים</div>
                <div class="row">
                    <div class="form-group">
                        <label>מבצע בפועל:</label>
                        <input type="text" id="performer" required>
                    </div>
                    <div class="form-group">
                        <label>מנהל אחראי:</label>
                        <input type="text" id="inCharge" required>
                    </div>
                </div>

                <div class="row">
                    <div class="form-group">
                        <label>קבלן משנה (אופציונלי):</label>
                        <input type="text" id="contractor">
                    </div>
                    <div class="form-group">
                        <label>איש קשר קבלן:</label>
                        <input type="text" id="contact" placeholder="טלפון / אתר">
                    </div>
                </div>

                <div class="section-title">📦 רכש ולוגיסטיקה</div>
                <div class="form-group">
                    <label>חומרים דרושים (ציוד):</label>
                    <input type="text" id="materials" placeholder="לדוגמה: מלט, צבע, כלי עבודה...">
                </div>
                <div class="row">
                    <div class="form-group">
                        <label>ספק:</label>
                        <input type="text" id="supplier" placeholder="שם הספק">
                    </div>
                    <div class="form-group">
                        <label>איש קשר ספק:</label>
                        <input type="text" id="supplierContact" placeholder="טלפון להזמנות">
                    </div>
                </div>
                
                <div class="section-title">📅 לוחות זמנים</div>
                <div class="row">
                    <div class="form-group">
                        <label>תאריך התחלה:</label>
                        <input type="date" id="startDate" required>
                    </div>
                    <div class="form-group">
                        <label>תאריך יעד:</label>
                        <input type="date" id="dueDate" required>
                    </div>
                </div>

                <button type="submit" class="btn-primary">שמור משימה</button>
            </form>
        </div>

        <div class="actions">
            <button onclick="window.location.href='/api/export'" class="btn-excel">⬇ הורדת דוח אקסל (מלא)</button>
        </div>

        <div id="tasksList"></div>
    </div>

    <div class="container hidden" id="detail-view">
        <button onclick="showMainView()" class="btn-secondary">🔙 חזרה לרשימה</button>
        <div class="card detail-card" id="detail-content"></div>
    </div>

    <script src="app.js"></script>
</body>
</html>